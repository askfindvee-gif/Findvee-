import { normalizeText } from './synonyms';

export type SearchCategory = 'service' | 'page' | 'support' | 'future';

export type SearchItem = {
  id: string;
  title: string;
  subtitle?: string;
  description: string;
  href: string;
  keywords: string[];
  intents: string[];
  exactPhrases: string[];
  localities: string[];
  category: SearchCategory;
  popularity: number; // 0-1
  reliability: number; // 0-1
  freshness: number; // 0-1
  proximityMeters: number;
  isOpen: boolean;
  clickThroughRate: number; // 0-1
  catalogTags: string[];
  badges?: string[];
  primaryAction?: { label: string; href: string };
};

const coastalLocalities = ['udupi', 'manipal', 'kundapura', 'malpe', 'saligrama'];

export const searchIndex: SearchItem[] = [
  {
    id: 'biz_global_health_pharmacy',
    title: 'Global Health Pharmacy',
    subtitle: 'Open • 24x7 • Home delivery',
    description:
      'Trusted Koteshwara pharmacy fulfilling urgent prescriptions, chronic care schedules, and late-night emergency calls.',
    href: '/support',
    keywords: ['pharmacy', 'chemist', 'medicine', 'prescription', 'lab'],
    intents: ['pharmacy', 'health', 'order medicines', 'lab tests'],
    exactPhrases: ['global health pharmacy'],
    localities: ['koteshwara', 'kundapura', 'udupi'],
    category: 'service',
    popularity: 0.92,
    reliability: 0.95,
    freshness: 0.7,
    proximityMeters: 420,
    isOpen: true,
    clickThroughRate: 0.68,
    catalogTags: ['order medicines', 'lab test booking'],
    badges: ['Trusted', 'Fast delivery'],
    primaryAction: { label: 'Order Medicines', href: '/support#health' },
  },
  {
    id: 'biz_coastal_lab_network',
    title: 'Coastal Lab Network',
    subtitle: 'Slots available today • Sample pickup',
    description:
      'Partner labs in Udupi and Manipal for diagnostics with technicians who coordinate doorstep sample pickups.',
    href: '/support',
    keywords: ['lab', 'diagnostics', 'health', 'tests'],
    intents: ['lab tests', 'pharmacy', 'health'],
    exactPhrases: ['lab test booking'],
    localities: ['udupi', 'manipal'],
    category: 'service',
    popularity: 0.81,
    reliability: 0.9,
    freshness: 0.74,
    proximityMeters: 900,
    isOpen: true,
    clickThroughRate: 0.57,
    catalogTags: ['lab test booking', 'order medicines'],
    badges: ['Certified technicians'],
    primaryAction: { label: 'Book a Lab Test', href: '/support#health' },
  },
  {
    id: 'biz_groceries_local_collective',
    title: 'Local Grocers Collective',
    subtitle: 'Morning delivery windows • Coastal staples',
    description:
      'Neighbourhood kiranas and supermarts from Kadiyali to Kundapura delivering fresh produce, millets, and essentials.',
    href: '/support',
    keywords: ['grocery', 'supermarket', 'kirana', 'shopping'],
    intents: ['grocery', 'general store', 'delivery'],
    exactPhrases: ['groceries & local supermarts'],
    localities: coastalLocalities,
    category: 'service',
    popularity: 0.88,
    reliability: 0.83,
    freshness: 0.78,
    proximityMeters: 650,
    isOpen: true,
    clickThroughRate: 0.62,
    catalogTags: ['groceries', 'shopping', 'delivery'],
    badges: ['Local favourite'],
    primaryAction: { label: 'Shop Groceries', href: '/support#shopping' },
  },
  {
    id: 'biz_veg_dining_circle',
    title: 'Veg Dining Circle',
    subtitle: 'Popular • Coastal veg classics',
    description:
      'Handpicked vegetarian restaurants and cafés spanning temple towns and student hubs with dine-in and delivery options.',
    href: '/support',
    keywords: ['restaurant', 'veg', 'food', 'order food'],
    intents: ['restaurant', 'veg', 'order food', 'delivery'],
    exactPhrases: ['vegetarian restaurants'],
    localities: ['udupi', 'manipal'],
    category: 'service',
    popularity: 0.86,
    reliability: 0.82,
    freshness: 0.76,
    proximityMeters: 1200,
    isOpen: true,
    clickThroughRate: 0.64,
    catalogTags: ['veg', 'restaurant', 'order food'],
    badges: ['Veg friendly'],
    primaryAction: { label: 'Explore Veg Dining', href: '/support#food' },
  },
  {
    id: 'biz_night_bite_delivery',
    title: 'Night Bite Delivery',
    subtitle: 'Late-night cafés • Student favourites',
    description:
      'After-hours delivery partners covering Manipal hostels and Udupi colleges with live order tracking.',
    href: '/support',
    keywords: ['food', 'restaurant', 'delivery', 'order food'],
    intents: ['order food', 'delivery'],
    exactPhrases: ['night delivery food'],
    localities: ['manipal', 'udupi'],
    category: 'service',
    popularity: 0.78,
    reliability: 0.76,
    freshness: 0.82,
    proximityMeters: 1500,
    isOpen: true,
    clickThroughRate: 0.58,
    catalogTags: ['order food', 'delivery'],
    badges: ['Live tracking'],
    primaryAction: { label: 'Order Tonight', href: '/support#food' },
  },
  {
    id: 'biz_autos_union',
    title: 'Udupi Autos Union',
    subtitle: 'Metered autos • Instant confirmations',
    description:
      'Verified auto drivers from Udupi, Manipal, and Malpe with coastal coverage and queue-less pickups.',
    href: '/support',
    keywords: ['auto', 'transport', 'ride', 'autorickshaw'],
    intents: ['auto', 'transport'],
    exactPhrases: ['autos & taxis'],
    localities: ['udupi', 'manipal', 'malpe'],
    category: 'service',
    popularity: 0.84,
    reliability: 0.88,
    freshness: 0.71,
    proximityMeters: 500,
    isOpen: true,
    clickThroughRate: 0.66,
    catalogTags: ['auto', 'transport'],
    badges: ['Trusted drivers'],
    primaryAction: { label: 'Book an Auto', href: '/support#transport' },
  },
  {
    id: 'biz_taxi_link',
    title: 'Coastal Taxi Link',
    subtitle: 'Airport runs • Hourly hires',
    description:
      'Fleet of taxis and cabs for Mangaluru airport transfers and Kundapura town hops with OTP-protected trips.',
    href: '/support',
    keywords: ['taxi', 'cab', 'ride', 'transport'],
    intents: ['taxi', 'transport', 'ride'],
    exactPhrases: ['taxi service', 'cab service'],
    localities: coastalLocalities,
    category: 'service',
    popularity: 0.83,
    reliability: 0.87,
    freshness: 0.69,
    proximityMeters: 2200,
    isOpen: true,
    clickThroughRate: 0.55,
    catalogTags: ['taxi', 'transport'],
    badges: ['OTP protected'],
    primaryAction: { label: 'Book a Taxi', href: '/support#transport' },
  },
  {
    id: 'biz_pet_care',
    title: 'Coastal Pet Care Network',
    subtitle: 'Vets • Grooming • Emergency meds',
    description:
      'Vets and groomers from Kundapura to Manipal handling vaccinations, rehab, and doorstep check-ups.',
    href: '/support',
    keywords: ['pet care', 'vet', 'grooming', 'pet clinic'],
    intents: ['pet care', 'pet store'],
    exactPhrases: ['pet care'],
    localities: coastalLocalities,
    category: 'service',
    popularity: 0.74,
    reliability: 0.8,
    freshness: 0.72,
    proximityMeters: 1300,
    isOpen: true,
    clickThroughRate: 0.52,
    catalogTags: ['pet care', 'grooming'],
    badges: ['Emergency ready'],
    primaryAction: { label: 'Plan Pet Visit', href: '/support#pet-care' },
  },
  {
    id: 'page_help_customers',
    title: 'Help Centre',
    subtitle: 'Support for customers and vendors',
    description: 'Guidance for customers and partners with escalation paths and service hours.',
    href: '/help',
    keywords: ['support', 'help', 'faq', 'customers', 'vendors'],
    intents: ['support', 'help'],
    exactPhrases: ['help centre', 'help center'],
    localities: coastalLocalities,
    category: 'page',
    popularity: 0.65,
    reliability: 0.82,
    freshness: 0.77,
    proximityMeters: 0,
    isOpen: true,
    clickThroughRate: 0.48,
    catalogTags: ['support'],
    badges: ['Live support'],
    primaryAction: { label: 'Open Help Centre', href: '/help' },
  },
  {
    id: 'page_about',
    title: 'About FindVee',
    subtitle: 'Mission • Coastal impact',
    description: 'Our mission to build a coastal operations graph that keeps every neighbourhood connected.',
    href: '/about',
    keywords: ['about', 'mission', 'story', 'team'],
    intents: ['about'],
    exactPhrases: ['about findvee'],
    localities: coastalLocalities,
    category: 'page',
    popularity: 0.6,
    reliability: 0.78,
    freshness: 0.68,
    proximityMeters: 0,
    isOpen: true,
    clickThroughRate: 0.44,
    catalogTags: ['about'],
    badges: ['Company'],
    primaryAction: { label: 'Read Our Story', href: '/about' },
  },
  {
    id: 'page_contact',
    title: 'Contact Operations Desk',
    subtitle: 'ask@findvee.com • +91 9731289898',
    description: 'Reach the team via phone, email, or at the Koteshwara office on NH66.',
    href: '/contact',
    keywords: ['contact', 'phone', 'email', 'office'],
    intents: ['contact'],
    exactPhrases: ['contact findvee'],
    localities: coastalLocalities,
    category: 'page',
    popularity: 0.59,
    reliability: 0.85,
    freshness: 0.6,
    proximityMeters: 0,
    isOpen: true,
    clickThroughRate: 0.41,
    catalogTags: ['contact'],
    badges: ['Office'],
    primaryAction: { label: 'Get in Touch', href: '/contact' },
  },
  {
    id: 'page_careers',
    title: 'Careers at FindVee',
    subtitle: 'Community, tech, marketing roles',
    description: 'Openings in community operations, technology, and marketing focused on coastal Karnataka.',
    href: '/careers',
    keywords: ['careers', 'jobs', 'hiring', 'apply'],
    intents: ['careers'],
    exactPhrases: ['careers at findvee'],
    localities: coastalLocalities,
    category: 'page',
    popularity: 0.54,
    reliability: 0.73,
    freshness: 0.72,
    proximityMeters: 0,
    isOpen: true,
    clickThroughRate: 0.39,
    catalogTags: ['careers'],
    badges: ['Now hiring'],
    primaryAction: { label: 'View Careers', href: '/careers' },
  },
  {
    id: 'page_login',
    title: 'Login to FindVee',
    subtitle: 'Secure partner & customer access',
    description: 'Sign in to manage orders, schedules, and account preferences across services.',
    href: '/login',
    keywords: ['login', 'sign in', 'account'],
    intents: ['login'],
    exactPhrases: ['login'],
    localities: coastalLocalities,
    category: 'page',
    popularity: 0.7,
    reliability: 0.86,
    freshness: 0.65,
    proximityMeters: 0,
    isOpen: true,
    clickThroughRate: 0.72,
    catalogTags: ['login'],
    badges: ['Secure'],
    primaryAction: { label: 'Login', href: '/login' },
  },
  {
    id: 'page_privacy',
    title: 'Privacy Policy',
    subtitle: 'Plain-language data practices',
    description: 'Understand how we protect customer and vendor data in plain language.',
    href: '/privacy',
    keywords: ['privacy', 'data', 'policy'],
    intents: ['privacy'],
    exactPhrases: ['privacy policy'],
    localities: coastalLocalities,
    category: 'page',
    popularity: 0.49,
    reliability: 0.9,
    freshness: 0.63,
    proximityMeters: 0,
    isOpen: true,
    clickThroughRate: 0.37,
    catalogTags: ['privacy'],
    badges: ['Policy'],
    primaryAction: { label: 'Review Privacy Policy', href: '/privacy' },
  },
  {
    id: 'page_terms',
    title: 'Terms of Use',
    subtitle: 'Fair use • Service commitments',
    description: 'Fair usage, liability, and dispute handling explained clearly.',
    href: '/terms',
    keywords: ['terms', 'legal', 'usage'],
    intents: ['terms'],
    exactPhrases: ['terms of use'],
    localities: coastalLocalities,
    category: 'page',
    popularity: 0.47,
    reliability: 0.88,
    freshness: 0.58,
    proximityMeters: 0,
    isOpen: true,
    clickThroughRate: 0.35,
    catalogTags: ['terms'],
    badges: ['Policy'],
    primaryAction: { label: 'Review Terms', href: '/terms' },
  },
  {
    id: 'support_vendor_onboarding',
    title: 'Vendor Onboarding',
    subtitle: 'Verified partners • Assisted setup',
    description: 'Partner with FindVee to receive verified requests and manage deliveries with ease.',
    href: '/onboarding',
    keywords: ['vendor', 'partner', 'onboarding', 'supply'],
    intents: ['support', 'vendor', 'onboarding'],
    exactPhrases: ['partner with findvee'],
    localities: coastalLocalities,
    category: 'support',
    popularity: 0.66,
    reliability: 0.8,
    freshness: 0.7,
    proximityMeters: 0,
    isOpen: true,
    clickThroughRate: 0.46,
    catalogTags: ['onboarding'],
    badges: ['Assisted'],
    primaryAction: { label: 'Partner with FindVee', href: '/onboarding' },
  },
  {
    id: 'future_recharge_utilities',
    title: 'Recharge & Utility Payments',
    subtitle: 'Coming soon • Unified bill desk',
    description: 'Preview of upcoming digital services for mobile recharges and household bills.',
    href: '/support',
    keywords: ['recharge', 'utilities', 'bill payment'],
    intents: ['recharge', 'utility'],
    exactPhrases: ['recharge & utility bill payments'],
    localities: coastalLocalities,
    category: 'future',
    popularity: 0.4,
    reliability: 0.6,
    freshness: 0.92,
    proximityMeters: 0,
    isOpen: false,
    clickThroughRate: 0.2,
    catalogTags: ['recharge'],
    badges: ['Coming soon'],
    primaryAction: { label: 'Join Waitlist', href: '/support#recharge' },
  },
];

export function normaliseItemKeywords(item: SearchItem) {
  const fields = [
    item.title,
    item.subtitle ?? '',
    item.description,
    ...item.keywords,
    ...item.intents,
    ...item.exactPhrases,
    ...item.catalogTags,
  ];
  return normalizeText(fields.join(' '));
}
